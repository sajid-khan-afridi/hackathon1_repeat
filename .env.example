# =============================================================================
# OpenAI Configuration
# =============================================================================
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# =============================================================================
# Qdrant Vector Database
# =============================================================================
# Sign up at https://cloud.qdrant.io and create a cluster
QDRANT_URL=https://your-cluster.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key

# Collection name for textbook content
QDRANT_COLLECTION=robotics_textbook

# =============================================================================
# Neon PostgreSQL Database
# =============================================================================
# Sign up at https://neon.tech and create a database
# Format: postgres://user:password@ep-your-endpoint.neon.tech/dbname?sslmode=require
DATABASE_URL=postgres://user:password@ep-your-endpoint.neon.tech/dbname?sslmode=require

# =============================================================================
# Backend Configuration
# =============================================================================
# Environment: development | production
ENVIRONMENT=development

# API host and port
API_HOST=0.0.0.0
API_PORT=8000

# CORS allowed origins (comma-separated)
# Development: Include localhost URLs for local testing
# Production: ONLY include your actual production domains
# SECURITY WARNING: Never use wildcards (*) in production!
#
# Example production configuration:
#   CORS_ORIGINS=https://your-frontend.com,https://www.your-frontend.com,https://your-api.com
#
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,https://sajid-khan-afridi.github.io

# =============================================================================
# Rate Limiting
# =============================================================================
# Queries per hour for anonymous users
RATE_LIMIT_ANONYMOUS=10

# Queries per hour for authenticated users
RATE_LIMIT_AUTHENTICATED=50

# =============================================================================
# RAG Configuration
# =============================================================================
# Minimum confidence threshold for accepting answers (0.0-1.0)
CONFIDENCE_THRESHOLD=0.2

# Number of chunks to retrieve from vector search
TOP_K_CHUNKS=5

# Maximum conversation history length (number of exchanges)
MAX_CONVERSATION_HISTORY=5

# Chat session retention period (days)
SESSION_RETENTION_DAYS=30

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Log format: json | text
# Use 'json' for production (structured logging)
# Use 'text' for development (human-readable)
LOG_FORMAT=json

# =============================================================================
# JWT Configuration (Phase 4A: Authentication)
# =============================================================================
# PRODUCTION DEPLOYMENT: Generate separate RSA key pairs for each environment
#
# Step 1: Generate RSA key pair (2048-bit recommended, 4096-bit for high security)
#   openssl genrsa -out jwt_private_production.pem 2048
#   openssl rsa -in jwt_private_production.pem -pubout -out jwt_public_production.pem
#
# Step 2: Convert keys to single-line format for environment variables
#   Windows PowerShell:
#     $private = Get-Content jwt_private_production.pem -Raw
#     $private -replace "`r`n", "\n" -replace "`n", "\n"
#   Linux/Mac:
#     awk 'NF {sub(/\r/, ""); printf "%s\\n",$0;}' jwt_private_production.pem
#
# Step 3: Copy the single-line output and paste below (keep quotes)
#
# SECURITY WARNINGS:
#   - NEVER commit actual production keys to version control
#   - Store production keys in secure secret management (Railway Secrets, GitHub Secrets, etc.)
#   - Use different key pairs for dev/staging/production environments
#   - Rotate keys periodically (recommended: every 6 months)
#   - If keys are compromised, revoke all tokens and generate new keys immediately
#
JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIE...\n-----END PRIVATE KEY-----"
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIB...\n-----END PUBLIC KEY-----"
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# =============================================================================
# Google OAuth Configuration
# =============================================================================
# Create credentials at https://console.cloud.google.com/apis/credentials
# Required: OAuth 2.0 Client ID (Web application type)
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback

# =============================================================================
# GitHub OAuth Configuration (Recommended - Easiest Setup!)
# =============================================================================
# DEVELOPMENT SETUP:
#   1. Create OAuth App at https://github.com/settings/developers
#   2. Click "New OAuth App" and fill in:
#      - Application name: RAG Chatbot Dev (or your app name)
#      - Homepage URL: http://localhost:3000
#      - Authorization callback URL: http://localhost:8000/auth/github/callback
#
# PRODUCTION SETUP:
#   1. Create a SEPARATE OAuth App for production at https://github.com/settings/developers
#   2. Click "New OAuth App" and fill in:
#      - Application name: RAG Chatbot Production
#      - Homepage URL: https://your-production-domain.com
#      - Authorization callback URL: https://your-api-domain.com/auth/github/callback
#   3. Generate new Client Secret for production (NEVER reuse dev secrets)
#   4. Store credentials in Railway Secrets or your deployment platform's secret manager
#
# IMPORTANT: Use different OAuth apps for dev/staging/production environments
#
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=http://localhost:8000/auth/github/callback

# =============================================================================
# Security Configuration
# =============================================================================
# CSRF Secret: Generate a cryptographically secure random string
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# SECURITY REQUIREMENTS:
#   - Use different CSRF secrets for dev/staging/production
#   - NEVER commit actual production secrets to version control
#   - Rotate secrets if compromised
#
CSRF_SECRET_KEY=your-32-char-random-string

# Frontend URL for OAuth redirects
# Development: http://localhost:3000
# Production: https://your-production-domain.com
FRONTEND_URL=http://localhost:3000
